---
layout: default
title: 分类
permalink: /categories/
---

{% assign locale = site.data.locales[site.language] %}

<div class="container">
  <header class="page-header">
    <h1 class="page-title">{{ locale.nav.categories }}</h1>
    <p class="page-description">按分类浏览文章</p>
  </header>

  <div class="categories-page">
    {% assign categories = site.categories | sort %}
    {% if categories.size > 0 %}
      <div class="categories-grid">
        {% for category in categories %}
          <div class="category-section" id="{{ category[0] | slugify }}">
            <h2 class="category-title">
              {{ category[0] }}
              <span class="category-count">({{ category[1] | size }})</span>
            </h2>
            
            <div class="posts-grid">
              {% for post in category[1] limit:6 %}
                <article class="post-card">
                  <div class="post-meta">
                    <time datetime="{{ post.date | date_to_xmlschema }}">
                      {{ post.date | date: "%Y-%m-%d" }}
                    </time>
                  </div>
                  
                  <h3 class="post-title">
                    <a href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
                  </h3>
                  
                  {% if post.excerpt %}
                    <p class="post-excerpt">{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
                  {% endif %}
                  
                  {% if post.tags.size > 0 %}
                    <div class="post-tags">
                      {% for tag in post.tags limit:3 %}
                        <a href="/tags/#{{ tag | slugify }}" class="tag">#{{ tag }}</a>
                      {% endfor %}
                    </div>
                  {% endif %}
                  
                  <a href="{{ post.url | relative_url }}" class="read-more-link">
                    {{ locale.general.read_more }} →
                  </a>
                </article>
              {% endfor %}
            </div>
            
            {% if category[1].size > 6 %}
              <div class="view-more">
                <button class="btn btn-secondary view-more-btn" data-category="{{ category[0] | slugify }}">
                  查看更多文章
                </button>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-state">
        <p>暂无分类文章。</p>
      </div>
    {% endif %}
  </div>
</div>

<style>
.categories-grid {
  display: grid;
  gap: var(--space-12);
}

.category-section {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
}

.category-title {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-6);
  color: var(--text-primary);
  font-size: 1.5rem;
}

.category-count {
  background-color: var(--accent-color);
  color: white;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 500;
}

.view-more {
  text-align: center;
  margin-top: var(--space-6);
}

.view-more-btn:hover {
  background-color: var(--accent-color);
  color: white;
}

.empty-state {
  text-align: center;
  padding: var(--space-16);
  color: var(--text-muted);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const viewMoreButtons = document.querySelectorAll('.view-more-btn');
  
  viewMoreButtons.forEach(button => {
    button.addEventListener('click', function() {
      const categoryId = this.dataset.category;
      const categorySection = document.getElementById(categoryId);
      const postsGrid = categorySection.querySelector('.posts-grid');
      
      // This would typically load more posts via AJAX
      // For now, just show a message
      this.textContent = '已显示所有文章';
      this.disabled = true;
    });
  });
});
</script>